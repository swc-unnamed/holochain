model Auction {
  id             String        @id @default(cuid())
  title          String
  description    String?
  organizationId String?       @map("organization_id")
  type           AuctionType   @default(SEALED)
  status         AuctionStatus @default(PENDING)
  createdAt      DateTime      @default(now()) @map("created_at")
  updatedAt      DateTime      @default(now()) @updatedAt @map("updated_at")
  start          DateTime?     @map("start_date")
  end            DateTime?     @map("end_date")
  lots           Lot[]

  @@map("auctions")
}

model Lot {
  id             String    @id @default(cuid())
  lotNumber      Int       @unique @default(autoincrement()) @map("lot_number")
  auctionId      String?   @map("auction_id")
  auction        Auction?  @relation(fields: [auctionId], references: [id])
  type           LotType   @default(LOT)
  title          String
  details        String
  location       String
  status         LotStatus @default(DRAFT)
  createdBy      User?     @relation(fields: [createdById], references: [id], name: "lots_created")
  createdById    String?   @map("created_by_id")
  purchasedById  String?   @map("purchased_by_id")
  purchasedBy    User?     @relation(fields: [purchasedById], references: [id], name: "lots_purchased")
  organizationId String?   @map("organization_id")
  startPrice     String    @map("start_price")
  purchasePrice  String?   @map("purchase_price")
  anonLot        Boolean   @default(false) @map("anon_lot")
  createdAt      DateTime  @default(now()) @map("created_at")
  updatedAt      DateTime  @default(now()) @updatedAt @map("updated_at")
  items          LotItem[]

  @@map("lots")
}

model LotItem {
  id        String   @id @default(cuid())
  lotId     String   @map("lot_id")
  lot       Lot      @relation(fields: [lotId], references: [id])
  name      String
  quantity  Int
  batch     Boolean  @default(false)
  custom    Boolean  @default(false)
  uuu       Boolean  @default(true)
  entityId  String   @map("entity_id")
  entity    Entity   @relation(fields: [entityId], references: [id])
  assetId   String?  @map("asset_id")
  asset     Asset?   @relation(fields: [assetId], references: [id])
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")

  @@map("lot_items")
}

enum LotType {
  LOT
  TEMPLATE

  @@map("lot_type")
}

enum LotStatus {
  DRAFT
  COMPLETED
  LISTED
  SCHEDULED
  SOLD
  WITHDRAWN

  @@map("lot_status")
}

enum AuctionType {
  LIVE
  SEALED
  TIMED

  @@map("auction_type")
}

enum AuctionStatus {
  ACTIVE
  CANCELLED
  COMPLETED
  PENDING

  @@map("auction_status")
}
